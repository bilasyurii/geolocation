<section class="mat-card place-add-container">
  <mat-tab-group dynamicHeight="true" mat-stretch-tabs>
    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="icon">
          my_location
        </mat-icon>

        By coordinates
      </ng-template>

      <form
        class="form-in-tab"
        [formGroup]="formWithCoords" 
        (ngSubmit)="submitWithCoords()">
        <mat-form-field class="form-field">
          <input 
            matInput 
            placeholder="Name" 
            type="text" 
            formControlName="name"
            required>

          <mat-error class="form-error" *ngIf="name.invalid">{{getErrorMessage(name)}}</mat-error>
        </mat-form-field>

        <mat-form-field class="form-field">
          <input 
            matInput 
            placeholder="Longitude" 
            type="text" 
            formControlName="longitude"
            required>
          
          <mat-error class="form-error" *ngIf="longitude.invalid">{{getErrorMessage(longitude)}}</mat-error>
        </mat-form-field>

        <mat-form-field class="form-field">
          <input 
            matInput 
            placeholder="Latitude" 
            type="text" 
            formControlName="latitude"
            required>

          <mat-error class="form-error" *ngIf="latitude.invalid">{{getErrorMessage(latitude)}}</mat-error>
        </mat-form-field>
        
        <mat-form-field class="form-field">
          <textarea
            matInput
            #descriptionElement
            cdkTextareaAutosize="true"
            placeholder="Description" 
            formControlName="description"></textarea>

          <mat-hint align="end">{{descriptionElement.value?.length || 0}}/256</mat-hint>

          <mat-error class="form-error" *ngIf="description.invalid">{{getErrorMessage(description)}}</mat-error>
        </mat-form-field>

        <button 
          mat-raised-button 
          type="submit" 
          [disabled]="!formWithCoords.valid"
          color="primary"
          class="white-text-button">
          <mat-icon class="icon">
            add
          </mat-icon>
          Add place
        </button>
      </form>
    </mat-tab>

    <mat-tab>
      <ng-template mat-tab-label>
        <mat-icon class="icon">
          location_city
        </mat-icon>

        By city
      </ng-template>
      
      <form
        class="form-in-tab"
        [formGroup]="formWithCity" 
        (ngSubmit)="submitWithCity()">
        <mat-form-field class="form-field">
          <input 
            matInput 
            placeholder="City" 
            type="text" 
            formControlName="city"
            [matAutocomplete]="autoComplete"
            required>

          <mat-error class="form-error" *ngIf="city.invalid">{{getErrorMessage(city)}}</mat-error>

          <mat-autocomplete
            #autoComplete="matAutocomplete"
            (optionSelected)='loadLocation($event.option.value)'
            [displayWith]='suggestionTransform'>
            <mat-option
              *ngFor="let suggestion of (suggestions | async)"
              [value]="suggestion">
              {{suggestion.name}}
            </mat-option>
          </mat-autocomplete>
        </mat-form-field>

        <mat-form-field class="form-field">
          <input 
            matInput 
            placeholder="Name" 
            type="text" 
            formControlName="name">

          <mat-error class="form-error" *ngIf="name2.invalid">{{getErrorMessage(name2)}}</mat-error>
        </mat-form-field>

        <mat-form-field class="form-field">
          <textarea
            matInput
            #descriptionElement2
            cdkTextareaAutosize="true"
            placeholder="Description" 
            formControlName="description"></textarea>

          <mat-hint align="end">{{descriptionElement2.value?.length || 0}}/256</mat-hint>

          <mat-error class="form-error" *ngIf="description2.invalid">{{getErrorMessage(description2)}}</mat-error>
        </mat-form-field>

        <button 
          mat-raised-button 
          type="submit" 
          [disabled]="!formWithCity.valid"
          color="primary"
          class="white-text-button">
          <mat-icon class="icon">
            add
          </mat-icon>

          Add place
        </button>
      </form>
    </mat-tab>
  </mat-tab-group>
</section>
